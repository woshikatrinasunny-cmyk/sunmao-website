{% extends "base.html" %}
{% block content %}
<section class="section">
    <div class="shop-header">
        <h2 class="section-title">榫卯文创商品</h2>
        <div class="shop-search">
            <input type="text" placeholder="搜索商品名称" class="search-input">
        </div>
        <div class="shop-filters">
            <span class="filter-btn active" data-category="huanghe">黄河区域原创文创</span>
            <span class="filter-btn" data-category="official">官方推荐</span>
            <span class="filter-btn" data-category="toy">益智玩具</span>
            <span class="filter-btn" data-category="model">建筑模型</span>
            <span class="filter-btn" data-category="decor">家居摆件</span>
        </div>
    </div>

    <div class="product-list">
        <!-- 黄河区域原创文创 - 秋风楼日历 -->
        <div class="product-item featured-product" data-category="huanghe">
            <div class="product-badge">原创设计</div>
            <div class="product-gallery">
                <div class="gallery-main">
                    <img id="qfl-main" src="{{ url_for('static', filename='images/秋风楼日历3.jpg') }}" 
                         onerror="this.src='{{ url_for('static', filename='images/placeholder.svg') }}'" 
                         alt="秋风楼日历">
                </div>
                <div class="gallery-thumbs">
                    <img src="{{ url_for('static', filename='images/秋风楼日历3.jpg') }}" 
                         onclick="changeImage(event, 'qfl-main', this.src)"
                         class="thumb active">
                    <img src="{{ url_for('static', filename='images/秋风楼日历4.jpg') }}" 
                         onclick="changeImage(event, 'qfl-main', this.src)"
                         class="thumb">
                    <img src="{{ url_for('static', filename='images/秋风楼日历1.png') }}" 
                         onclick="changeImage(event, 'qfl-main', this.src)"
                         class="thumb">
                    <img src="{{ url_for('static', filename='images/秋风楼日历2.png') }}" 
                         onclick="changeImage(event, 'qfl-main', this.src)"
                         class="thumb">
                    <img src="{{ url_for('static', filename='images/秋风楼日历5.png') }}" 
                         onclick="changeImage(event, 'qfl-main', this.src)"
                         class="thumb">
                </div>
            </div>
            <div class="product-info">
                <h3>秋风楼日历</h3>
                <p class="product-desc">后土祠秋风楼主题精美日历，融合黄河文化与建筑美学</p>
                <p class="product-sales">2026年全年 · 5款设计</p>
                <p class="product-price">¥ <span>68</span>.00</p>
            </div>
        </div>

        <!-- 黄河区域原创文创 - 飞云楼日历 -->
        <div class="product-item featured-product" data-category="huanghe">
            <div class="product-badge">原创设计</div>
            <div class="product-gallery">
                <div class="gallery-main">
                    <img id="fyl-main" src="{{ url_for('static', filename='images/飞云楼日历1.png') }}" 
                         onerror="this.src='{{ url_for('static', filename='images/placeholder.svg') }}'" 
                         alt="飞云楼日历">
                </div>
                <div class="gallery-thumbs">
                    <img src="{{ url_for('static', filename='images/飞云楼日历1.png') }}" 
                         onclick="changeImage(event, 'fyl-main', this.src)"
                         class="thumb active">
                    <img src="{{ url_for('static', filename='images/飞云楼日历2.png') }}" 
                         onclick="changeImage(event, 'fyl-main', this.src)"
                         class="thumb">
                </div>
            </div>
            <div class="product-info">
                <h3>飞云楼日历</h3>
                <p class="product-desc">万荣飞云楼主题日历，展现纯木结构建筑的榫卯之美</p>
                <p class="product-sales">2026年全年 · 2款设计</p>
                <p class="product-price">¥ <span>68</span>.00</p>
            </div>
        </div>

        <!-- 官方推荐商品 -->
        <a href="#product1" class="product-item" data-category="official model" onclick="showProductDetail(event, 'product1')">
            <div class="product-img">
                <img src="{{ url_for('static', filename='images/product1.jpg') }}" 
                     onerror="this.src='{{ url_for('static', filename='images/placeholder.svg') }}'" 
                     alt="沉香亭榫卯模型">
            </div>
            <div class="product-info">
                <h3>沉香亭榫卯模型</h3>
                <p class="product-desc">1:50比例复刻唐代沉香亭，采用优质榉木，纯榫卯结构</p>
                <p class="product-sales">月销量 300+ · 好评率 98%</p>
                <p class="product-price">¥ <span>230</span>.00起</p>
            </div>
        </a>
        
        <a href="#product2" class="product-item" data-category="official toy" onclick="showProductDetail(event, 'product2')">
            <div class="product-img">
                <img src="{{ url_for('static', filename='images/product2.jpg') }}" 
                     onerror="this.src='{{ url_for('static', filename='images/placeholder.svg') }}'" 
                     alt="十二生肖鲁班锁套装">
            </div>
            <div class="product-info">
                <h3>十二生肖鲁班锁套装</h3>
                <p class="product-desc">12款不同难度的鲁班锁，每款对应一个生肖造型</p>
                <p class="product-sales">月销量 520+ · 好评率 99%</p>
                <p class="product-price">¥ <span>88</span>.00起</p>
            </div>
        </a>
        
        <a href="#product3" class="product-item" data-category="official model" onclick="showProductDetail(event, 'product3')">
            <div class="product-img">
                <img src="{{ url_for('static', filename='images/product3.jpg') }}" 
                     onerror="this.src='{{ url_for('static', filename='images/placeholder.svg') }}'" 
                     alt="黄鹤楼榫卯模型">
            </div>
            <div class="product-info">
                <h3>黄鹤楼榫卯模型</h3>
                <p class="product-desc">1:75比例还原武汉黄鹤楼，468个零件，全榫卯结构</p>
                <p class="product-sales">月销量 280+ · 好评率 97%</p>
                <p class="product-price">¥ <span>328</span>.00起</p>
            </div>
        </a>
        
        <a href="#product4" class="product-item" data-category="official toy" onclick="showProductDetail(event, 'product4')">
            <div class="product-img">
                <img src="{{ url_for('static', filename='images/product4.jpg') }}" 
                     onerror="this.src='{{ url_for('static', filename='images/placeholder.svg') }}'" 
                     alt="经典榉木鲁班锁">
            </div>
            <div class="product-info">
                <h3>经典榉木鲁班锁</h3>
                <p class="product-desc">传统六子联方鲁班锁，精选进口榉木，手工打磨</p>
                <p class="product-sales">月销量 680+ · 好评率 99%</p>
                <p class="product-price">¥ <span>58</span>.00起</p>
            </div>
        </a>
        
        <a href="#product5" class="product-item" data-category="official model" onclick="showProductDetail(event, 'product5')">
            <div class="product-img">
                <img src="{{ url_for('static', filename='images/placeholder.svg') }}" 
                     alt="应县木塔精密模型">
                <div class="placeholder-text">应县木塔模型</div>
            </div>
            <div class="product-info">
                <h3>应县木塔精密模型</h3>
                <p class="product-desc">1:100比例复刻辽代应县木塔，1200+零件，纯榫卯结构</p>
                <p class="product-sales">月销量 150+ · 好评率 100%</p>
                <p class="product-price">¥ <span>688</span>.00起</p>
            </div>
        </a>
        
        <a href="#product6" class="product-item" data-category="official model" onclick="showProductDetail(event, 'product6')">
            <div class="product-img">
                <img src="{{ url_for('static', filename='images/placeholder.svg') }}" 
                     alt="飞云楼榫卯模型">
                <div class="placeholder-text">飞云楼模型</div>
            </div>
            <div class="product-info">
                <h3>飞云楼榫卯模型</h3>
                <p class="product-desc">1:60比例还原万荣飞云楼，三层四檐，斗拱结构精美</p>
                <p class="product-sales">月销量 180+ · 好评率 98%</p>
                <p class="product-price">¥ <span>398</span>.00起</p>
            </div>
        </a>
        
        <a href="#product7" class="product-item" data-category="official decor" onclick="showProductDetail(event, 'product7')">
            <div class="product-img">
                <img src="{{ url_for('static', filename='images/placeholder.svg') }}" 
                     alt="榫卯结构书签套装">
                <div class="placeholder-text">榫卯书签</div>
            </div>
            <div class="product-info">
                <h3>榫卯结构书签套装</h3>
                <p class="product-desc">10款经典榫卯结构书签，黄铜材质，激光雕刻</p>
                <p class="product-sales">月销量 420+ · 好评率 99%</p>
                <p class="product-price">¥ <span>39</span>.00起</p>
            </div>
        </a>
        
        <a href="#product8" class="product-item" data-category="official toy" onclick="showProductDetail(event, 'product8')">
            <div class="product-img">
                <img src="{{ url_for('static', filename='images/placeholder.svg') }}" 
                     alt="儿童榫卯启蒙积木">
                <div class="placeholder-text">儿童积木</div>
            </div>
            <div class="product-info">
                <h3>儿童榫卯启蒙积木</h3>
                <p class="product-desc">120件大颗粒榫卯积木，安全环保，培养空间思维</p>
                <p class="product-sales">月销量 890+ · 好评率 99%</p>
                <p class="product-price">¥ <span>128</span>.00起</p>
            </div>
        </a>
    </div>
</section>

<script>
function changeImage(event, mainId, newSrc) {
    event.stopPropagation();
    const mainImg = document.getElementById(mainId);
    mainImg.src = newSrc;
    
    // 更新缩略图激活状态
    const gallery = mainImg.closest('.product-gallery');
    gallery.querySelectorAll('.thumb').forEach(thumb => {
        thumb.classList.remove('active');
    });
    event.currentTarget.classList.add('active');
}

function showProductDetail(event, productId) {
    event.preventDefault();
    
    document.querySelectorAll('.product-item').forEach(item => {
        item.classList.remove('selected');
    });
    
    event.currentTarget.classList.add('selected');
    
    const productName = event.currentTarget.querySelector('h3').textContent;
    alert(`商品详情：${productName}\n\n点击确定查看更多信息（功能开发中）`);
}

// 筛选功能
document.addEventListener('DOMContentLoaded', function() {
    const filterBtns = document.querySelectorAll('.filter-btn');
    const products = document.querySelectorAll('.product-item');
    
    filterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            // 更新按钮状态
            filterBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            const category = this.dataset.category;
            
            // 筛选商品
            products.forEach(product => {
                const categories = product.dataset.category;
                if (categories && categories.includes(category)) {
                    product.style.display = 'block';
                } else {
                    product.style.display = 'none';
                }
            });
        });
    });
});
</script>

<style>
.product-desc {
    font-size: 0.85rem;
    color: var(--text-mid);
    line-height: 1.5;
    margin: 8px 0;
}

.product-img {
    position: relative;
    overflow: hidden;
}

.placeholder-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(184, 160, 126, 0.9);
    color: white;
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 0.9rem;
    font-weight: 600;
    white-space: nowrap;
    pointer-events: none;
}

.product-item {
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
    color: inherit;
    display: block;
}

.product-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

.product-item.selected {
    border: 2px solid var(--accent);
    box-shadow: 0 8px 25px rgba(184, 160, 126, 0.3);
}

/* 原创商品样式 */
.featured-product {
    position: relative;
}

.product-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background: linear-gradient(135deg, #d4a574 0%, #c19a6b 100%);
    color: white;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    z-index: 10;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* 多图展示样式 */
.product-gallery {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    background: var(--bg-cream);
    padding: 10px;
}

.gallery-main {
    width: 100%;
    height: 200px;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 10px;
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
}

.gallery-main img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    transition: transform 0.3s;
}

.gallery-main:hover img {
    transform: scale(1.05);
}

.gallery-thumbs {
    display: flex;
    gap: 6px;
    justify-content: center;
    flex-wrap: wrap;
}

.thumb {
    width: 45px;
    height: 45px;
    border-radius: 6px;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.3s;
    object-fit: cover;
}

.thumb:hover {
    border-color: var(--accent);
    transform: scale(1.1);
}

.thumb.active {
    border-color: var(--accent-dark);
    box-shadow: 0 2px 8px rgba(184, 160, 126, 0.4);
}
</style>
{% endblock %}
